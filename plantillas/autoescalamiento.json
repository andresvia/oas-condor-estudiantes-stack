{
  "AWSTemplateFormatVersion": "2010-09-09",
  "Resources": {
    "Balanceador": {
      "Type": "AWS::ElasticLoadBalancing::LoadBalancer",
      "Properties": {
        "SecurityGroups": [
          {
            "Fn::GetAtt": [
              "SeguridadBalanceador",
              "GroupId"
            ]
          }
        ],
        "Listeners": [
          {
            "InstancePort": "80",
            "LoadBalancerPort": "80",
            "Protocol": "HTTP",
            "PolicyNames": [
              "OASSessionPolicy"
            ]
          }
        ],
        "Subnets": [
          "subnet-03ac6375",
          "subnet-f712f4af"
        ],
        "Policies": [
          {
            "PolicyName": "OASSessionPolicy",
            "PolicyType": "AppCookieStickinessPolicyType",
            "Attributes": [
              {
                "Name": "OASSession",
                "Value": "OASSESSION"
              }
            ]
          }
        ]
      }
    },
    "Autoescalamiento": {
      "Type": "AWS::AutoScaling::AutoScalingGroup",
      "Properties": {
        "LoadBalancerNames": [
          {
            "Ref": "Balanceador"
          }
        ],
        "LaunchConfigurationName": {
          "Ref": "Configuracion"
        },
        "MinSize": "0",
        "MaxSize": "0",
        "VPCZoneIdentifier": [
          "subnet-03ac6375",
          "subnet-f712f4af"
        ]
      }
    }
  }
}
